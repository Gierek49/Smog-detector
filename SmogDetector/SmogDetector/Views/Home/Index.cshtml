<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,
          initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <style>
        #map {
            height: 600px;
            width: 100%;
        }
    </style>
</head>

<body>
    <h2>Smog Detector</h2>
    <div id="map">

    </div>
    <script>
        function initMap() {

            var myLatlng = { lat: 52.2297, lng: 21.0122 };
            var markers = [];

            var options = {
                zoom: 11,
                center: { lat: 52.2297, lng: 21.0122 }
            }

            var map = new
                google.maps.Map(document.getElementById('map'), options);

            //Dymek z informacja
            var infoWindow = new google.maps.InfoWindow(
                { content: 'Naciśnij mape by dostać współrzędne', position: myLatlng });
            infoWindow.open(map);


            // Marker na klik
            google.maps.event.addListener(map, 'click',
                function (event) {

                    //deleteMarkers();
                    addMarker({ coords: event.latLng });

                    infoWindow.close();

                    //Tworzenie nowego dymku
                    infoWindow = new google.maps.InfoWindow({ position: event.latLng });
                    infoWindow.setContent(event.latLng.toString());
                    infoWindow.open(map);

                    var coordinates = event.latLng;
                });


            //Funkcja dodanie markera
            function addMarker(props) {

                var marker = new google.maps.Marker({
                    position: props.coords,
                    map: map

                })

                markers.push(marker);
            }

            //Usuniecie markera
            function deleteMarkers() {
                clearMarkers();
                markers = [];
            }
        }
    </script>

    <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA4IoYuGPVOKjjMdOPIxnrpYmD8MnODKv0&callback=initMap">
    </script>
</body>
</html>